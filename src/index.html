<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>The Cheeze of Insight</title>

    <!-- CSS Imports -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/bootstrap.block-grid/latest/bootstrap4-block-grid.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuesax/dist/vuesax.css" rel="stylesheet">
    <link href="https://unpkg.com/vue-simple-context-menu/dist/vue-simple-context-menu.css" rel="stylesheet" type="text/css">
    
    <link href="node_modules/firechat/dist/firechat.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <!-- JS Imports -->
    <!-- jQuery is only for Firechat, sigh -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <!-- Firebase -->
    <script type="text/javascript" src="js/firebase.js"></script>
    <!-- Fire Chat -->
    <script type="text/javascript" src="node_modules/firechat/dist/firechat.js"></script>
    <!-- Vue.js -->
    <script type="text/javascript" src="js/vue.js"></script>
    <script type="text/javascript" src="js/vuefire.js"></script>
    <script type="text/javascript" src="js/vuesax.js"></script>
    <script type="text/javascript" src="js/vue-simple-context-menu.js"></script>
</head>
<body>
    <div id="cheese-of-insight" class="container container-fluid main-content">
        <div class="wrapper mount-wrapper" v-cloak>

            <!-- Chat Component (Sidebar) -->
            <sidebar>
                <div class="menu login-items" slot="menu-items">
                    <a v-on:click="login();" v-if="!userIsLoggedIn">Login</a>
                    <a v-on:click="logout();" v-if="userIsLoggedIn">Logout</a>
                </div>

                <!-- Header -->
                <div class="header-sidebar" slot="header">
                    <div class="wrapper" v-if="!userIsLoggedIn">
                        <p>
                            <a v-on:click="login();">Login</a>
                        </p>
                    </div>
                    <div class="wrapper sidebar-wrapper" v-if="isWeb3Enabled">
                        <span class="label-wrapper" v-if="chat">
                            <h5 v-if="chat.userData">{{ chat.userData.name }}</h5>
                        </span>
                        <h5 v-else-if="wallets.mainnet">{{ wallets.mainnet }}</h5>
                    </div>
                </div>

                <!-- Body - Select Opponent / Active Chat Window -->
                <div class="chat-pane" slot="body">

                    <!-- Chat not connected -->
                    <div class="chat-invalid" v-if="!userIsLoggedIn">
                        <p>Please login to find online partners for test duels</p>
                    </div>

                    <!-- Select Opponent From Online Users -->
                    <div class="select-duel-partner" v-else-if="userIsLoggedIn && chatState == 'browsing'">
                        <h5>Summoners Online:</h5>

                        <!-- Online Users -->
                        <div v-for="(user, index) in usersOnline" @click.prevent.stop="contextMenuHandler($event, user)">
                            <!-- Yourself / Current User -->
                            <div class="chat summoner-row self" v-if="user['.key'] == chat.userData.name">
                                <a class="summoner-link">{{ index + 1 }}) {{ user['.key'] }} <span class="you">(you)</span></a>
                            </div>
                            <!-- Other Users -->
                            <div class="chat summoner-row opponent" v-if="user['.key'] !== chat.userData.name">
                                <a class="summoner-link">{{ index + 1 }}) {{ user['.key'] }}</a>
                            </div>
                        </div>

                        <!-- Context Menu Pop-over -->
                        <vue-simple-context-menu
                            :element-id="'testnet_challenge_menu'"
                            :options="testnetContextMenuOptions"
                            :ref="'chatContextMenu'"
                            @option-clicked="contextMenuResolver"
                        >
                        </vue-simple-context-menu>


                        <!--
                        <div class="item-wrapper">
                            <div v-for="item in items" @click.prevent.stop="handleClick($event, item)" class="item-wrapper__item">
                                {{item.name}}
                            </div>
                        </div>

                        <vue-simple-context-menu
                            :elementId="'myUniqueId'"
                            :options="options"
                            :ref="'vueSimpleContextMenu'"
                            @option-clicked="optionClicked">
                        </vue-simple-context-menu>

                        handleClick (event, item) {
                            this.$refs.vueSimpleContextMenu.showMenu(event, item)
                        }

                        optionClicked (event) {
                            window.alert(JSON.stringify(event))
                        }
                        -->


                    </div>

                    <!-- Active Chat Window -->
                    <div class="select-duel-partner"></div>
                </div>

                <!-- Footer - Chat Box Input -->
            </sidebar>
            <!-- End Chat Component (Sidebar) -->

            <h3>Welcome to the Holy Cheeze of Insight!</h3>
            <div class="img-main" v-if="navigation.state < 0">
                <img class="img-fluid" src="img/holiness.jpg">
            </div>
            <div class="back-btn" v-else-if="navigation.state == VIEW_SELECTED_WIZARD">
                <a v-on:click="navigation.state = VIEW_ALL_WIZARDS">Back</a>
            </div>
            <div class="back-btn" v-else-if="navigation.state == PREDICT_MATCHES && currentWizard">
                <a v-on:click="navigation.state = VIEW_SELECTED_WIZARD">Back</a>
            </div>
            <div class="back-btn" v-else>
                <a v-on:click="navigation.state = HOME_STATE">Back</a>
            </div>
            <div class="row navigation">
                <ul class="list-group">
                    <li class="list-group-item view-all-wizards" v-bind:class="{active: navigation.state == VIEW_ALL_WIZARDS || navigation.state == VIEW_SELECTED_WIZARD}">
                        <a v-on:click="setNavigation(0);">Browse Wizards</a>
                    </li>
                    <li class="list-group-item predict-matches" v-bind:class="{active: navigation.state == PREDICT_MATCHES}">
                        <a v-on:click="showPredictMatchOutcome();">Compare Wizards</a>
                    </li>
                </ul>
            </div>

            <!-- Browse All Wizards -->
            <div class="row view-all-wizards" v-if="navigation.state == VIEW_ALL_WIZARDS">
                <p v-if="isLoading">Loading Wizards...</p>
                <div class="all-wizards" v-else>

                    <!-- Wizards Search -->
                    <div class="search-toggle">
                        <a v-on:click="showSearch = true;" v-if="!showSearch"><img class="icon icon-search" src="/img/icons/search.svg">Search Wizards</a>
                        <a v-on:click="showSearch = false;" v-if="showSearch"><img class="icon icon-search" src="/img/icons/search.svg">Hide Search Options</a>
                        <!-- Show Only My Owned Wizards -->
                        <span class="search-my-wizards-toggle" v-if="userOwnsWizards"> / 
                            <a v-on:click="wizardsMineFilter = true;" v-if="!wizardsMineFilter">Show only my Wizards</a>
                            <a v-on:click="wizardsMineFilter = false;" v-if="wizardsMineFilter">Show all Wizards</a>
                        </span>
                    </div>
                    
                    <div class="row container search-controls" v-if="showSearch">
                        <!-- Search Wizards by ID or Affinity -->
                        <div class="search-wizards" v-if="wizardsSearchType == PRIMARY_SEARCH">
                            <h3>Lost your Wizard again? Cheeze.</h3>
                            <p class="descr">Type an Affinity or Wizard ID in the search box to search Wizards.</p>
                            <p class="descr">Example searches: "Fire", "1614".</p>
                            <div>
                                <input type="text" name="search_wizards_by_id_or_affinity" v-model="wizardsPrimaryFilter" placeholder="Search Wizards">
                                <p v-if="wizardsPrimaryFilter.length">
                                    <a v-on:click="wizardsPrimaryFilter = ''">Clear search</a>
                                </p>
                            </div>
                            <!-- Search Options -->
                            <div class="search-toggle">
                                <p>
                                    <a v-on:click="wizardsSearchType = VULNERABILITY_SEARCH;">Switch to weaklings search mode</a>
                                </p>
                                <p>
                                    <a v-on:click="showSearch = false;">Hide Search Options</a>
                                </p>
                            </div>
                        </div>
                        <!-- Search Wizards by Vulnerability -->
                        <div class="search-wizards" v-if="wizardsSearchType == VULNERABILITY_SEARCH">
                            <h3>Looking for weaknesses? You scoundrel.</h3>
                            <p class="descr">Type an Affinity in the search box to search out vulnerable opponents.</p>
                            <p>Example searches: "Water", "Fire", "Wind", "Unknown".</p>
                            <div>
                                <input type="text" name="search_wizards_by_vulnerability" v-model="wizardsVulnerabilityFilter" placeholder="Search Wizards">
                            </div>
                            <!-- Search Options -->
                            <div class="search-toggle">
                                <p>
                                    <a v-on:click="wizardsSearchType = PRIMARY_SEARCH;">Back to Cheeze Wiz search mode</a>
                                </p>
                                <p>
                                    <a v-on:click="showSearch = false;">Hide Search</a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="controls">
                        <!-- Sort / Group Wizards -->
                        <p>
                            <strong>Currently sorting wizards by {{ getSortedBy }}</strong>
                        </p>
                        <p>
                            <select v-model="wizardsSortedBy" v-on:change="setWizardsSorting(wizardsSortedBy)">
                                <option v-bind:value="SORTED_BY_POWER_LEVEL_STRONGEST">{{ sortedBy[SORTED_BY_POWER_LEVEL_STRONGEST] }}</option>
                                <option v-bind:value="SORTED_BY_POWER_LEVEL_WEAKEST">{{ sortedBy[SORTED_BY_POWER_LEVEL_WEAKEST] }}</option>
                                <option v-bind:value="SORTED_BY_POWER_LEVEL_GROWTH_STRONGEST">{{ sortedBy[SORTED_BY_POWER_LEVEL_GROWTH_STRONGEST] }}</option>
                                <option v-bind:value="SORTED_BY_POWER_LEVEL_GROWTH_WEAKEST">{{ sortedBy[SORTED_BY_POWER_LEVEL_GROWTH_WEAKEST] }}</option>
                                <option v-bind:value="SORTED_BY_AFFINITY_GROUPINGS">{{ sortedBy[SORTED_BY_AFFINITY_GROUPINGS] }}</option>
                            </select>
                        </p>
                    </div>
                    <div class="wizard" v-for="(wizard, index) in wizardsPage">
                        <ul class="wizards-list">
                            <li v-if="currentWizardsPage !== 1">
                                <a v-on:click="showWizard(wizard.id);">{{index + (currentWizardsPage * wizardsPageSize) +  1 }}) Cheeze Wizard #{{ wizard.id }} - <img class="icon" :src="'img/icons/' + affinities[wizard.affinity].toLowerCase() + '.svg'" v-if="wizard.affinity !== 0"> - {{ getPrettyPowerLevel(wizard.power) }}</a>
                            </li>
                            <li v-else>
                                <a v-on:click="showWizard(wizard.id);">{{index +  1 }}) Cheeze Wizard #{{ wizard.id }} - <img class="icon" :src="'img/icons/' + affinities[wizard.affinity].toLowerCase() + '.svg'" v-if="wizard.affinity !== 0"> - {{ getPrettyPowerLevel(wizard.power) }}</a>
                            </li>
                        </ul>
                    </div>
                    <!-- Paging -->
                    <div class="page-controls">
                        <button class="btn btn-primary" v-on:click="previousWizardsPage();" :disabled="currentWizardsPage <= 1">Previous</button>
                        <button class="btn btn-inverse" v-on:click="currentWizardsPage = 1;" :disabled="currentWizardsPage <= 1"><<</button>
                        <button class="btn btn-inverse" v-on:click="currentWizardsPage = totalWizardsPages" :disabled="currentWizardsPage >= totalWizardsPages">>></button>
                        <button class="btn btn-primary" v-on:click="nextWizardsPage();" :disabled="currentWizardsPage >= totalWizardsPages">Next</button>
                    </div>
                </div>
            </div>

            <!-- Browse Single Wizard -->
            <div class="view-single-wizard" v-if="navigation.state == VIEW_SELECTED_WIZARD">
                <p v-if="isLoading">Loading Wizards...</p>
                <div class="single-wizard" v-if="currentOpposingWizard">
                    <!-- Left Pane - Wizard Image -->
                    <div class="selected-wizard-left">
                        <!-- Title -->
                        <h5 class="title">Cheeze Wizard #{{ currentOpposingWizard.id }}</h5>
                        <!-- Affinity -->
                        <div class="affinity">
                            <p>
                                <strong>Affinity:</strong>
                                <img class="icon" :src="'img/icons/' + currentOpposingWizard.specialPower.toLowerCase() + '.svg'" v-if="currentOpposingWizard.specialPower && currentOpposingWizard.specialPower !== 'Unknown'"> {{ currentOpposingWizard.specialPower }}
                            </p>
                        </div>
                        <!-- Weak Against -->
                        <div class="vulnerability">
                            <p>
                                <strong>Weak Against:</strong>
                                <img class="icon" :src="'img/icons/' + currentOpposingWizard.vulnerability.toLowerCase() + '.svg'" v-if="currentOpposingWizard.vulnerability && currentOpposingWizard.vulnerability !== 'Unknown'"> {{ currentOpposingWizard.vulnerability }}
                            </p>
                        </div>
                        <!-- Strong Against -->
                        <div class="optimal-opponent">
                            <p>
                                <strong>Strong Against:</strong>
                                <img class="icon" :src="'img/icons/' + currentOpposingWizard.optimalOpponent.toLowerCase() + '.svg'" v-if="currentOpposingWizard.optimalOpponent && currentOpposingWizard.optimalOpponent !== 'Unknown'"> {{ currentOpposingWizard.optimalOpponent }}
                            </p>
                        </div>
                        <!-- Power Level -->
                        <div class="power-level">
                            <p>
                                <strong>Power Level:</strong> {{ getPrettyPowerLevel(currentOpposingWizard.power) }}
                            </p>
                        </div>
                        <!-- Growth Stats -->
                        <div class="growth">
                            <p>
                                <strong>Lifetime Power Growth:</strong> {{ getPrettyPowerLevel(currentOpposingWizard.power - currentOpposingWizard.initialPower) }}
                            </p>
                        </div>
                        <!-- Owner -->
                        <div class="owner">
                            <p>
                                <strong>Owner:</strong> {{ currentOpposingWizard.owner }}
                            </p>
                            <p>
                                <!-- View Other Wizards By This Owner -->
                                <a class="real-styled" v-on:click="showAllWizardsOfOwner(currentOpposingWizard.owner)">View all Wizards from this owner</a>
                            </p>
                            <modal v-if="selectedWizardsByAddressModalShown" @close="selectedWizardsByAddressModalShown = false">
                                <!-- Custom Modal Overrides -->
                                <h3 slot="header">{{ currentOpposingWizard.owner }}'s Wizards</h3>
                                <div slot="body">
                                    <div class="wizard-card-block-item wizard-card-block-item-outer" v-for="wizard in selectedWizardsByAddress">
                                        <div class="wizard-card-block-item">
                                            <!-- Wizard Image -->
                                            <a v-on:click="showWizard(wizard.id); selectedWizardsByAddressModalShown = false;">
                                                <div class="wizard-card wizard-card-img">
                                                    <div class="cheese-wizard-image selected-by-address-opponent-img" :style="'background-image: url(' + wizard.image + ')'" v-if="wizard.image"></div>
                                                    <!-- Card Label (Link Text) -->
                                                    <div class="wizard-card wizard-card-label">
                                                        <p>Cheeze Wizard #{{ wizard.id }} - <img class="icon" :src="'img/icons/' + affinities[wizard.affinity].toLowerCase() + '.svg'" v-if="wizard.affinity !== 0"> - {{ getPrettyPowerLevel(wizard.power) }}</p>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </modal>
                        </div>
                        <!-- External Link -->
                        <div class="external-link">
                            <p>
                                <a :href="'https://www.cheezewizards.com/wizard/' + currentOpposingWizard.id" target="_blank">View on cheezewizards.com <img class="icon external-link" src="img/icons/external_link.svg"></a>
                            </p>
                        </div>
                    </div>

                    <!-- Right Pane - Wizard Image -->
                    <div class="selected-wizard-right" v-if="currentOpposingWizard.image">
                        <div class="cheese-wizard-image selected-opponent-img" :style="'background-image: url(' + currentOpposingWizard.image + ')'">
                            <!--
                            <img class="img-fluid opponent-wizard-img" :src="currentOpposingWizard.image">
                            -->
                        </div>
                    </div>
                </div>
                <!-- Traits -->
                <div class="traits traits-container select-wizard" v-if="currentOpposingWizard.traits">
                    <div class="traits traits-container-inner" v-if="currentOpposingWizard.traits.rarities">
                        <div class="block-grid-xs-2 block-grid-sm-3 block-grid-md-4" v-if="currentOpposingWizard.traits.rarities.length">
                            <div class="block-item block-item-outer" v-if="currentOpposingWizard.traits.affinityStats && currentOpposingWizard.specialPower && currentOpposingWizard.specialPower !== 'Unknown'">
                                
                                <!---
                                    ALL CATALOGUED TRAITS:
                                    backneck <= all wizards have "Iridescence" set as this trait
                                    boots <= all wizards have "Booties" set as this trait
                                    cape
                                    expression
                                    head
                                    hat
                                    leftHandBack <= all wizards except a few rare ones have "Vice Grip"
                                    leftHhandFront <= all wizards have this trait set to "Vice Grip"
                                    legs
                                    property <= all wizards that have an affinity set
                                    rightHandFront
                                    wand
                                -->
                                
                                <!-- Affinity Trait -->
                                <div class="block-item block-item-inner affinity">
                                    <p class="affinity label">
                                        <strong>Affinity Type</strong>
                                    </p>
                                    <p class="affinity trait-name">{{ currentOpposingWizard.specialPower }}</p>
                                    <p class="rarity-index">1 of {{ currentOpposingWizard.traits.affinityStats[currentOpposingWizard.specialPower] }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(currentOpposingWizard.traits.affinityStats[currentOpposingWizard.specialPower]) }}% have this trait</p>
                                </div>
                            </div>

                            <!-- Elemental Trait -->
                            <div class="block-item block-item-outer" v-if="currentOpposingWizard.traits.affinityStats && currentOpposingWizard.specialPower !== 'Neutral' && currentOpposingWizard.specialPower !== 'Unknown'">
                                <div class="block-item block-item-inner elemental">
                                    <p class="elemental label">
                                        <strong>Elemental</strong>
                                    </p>
                                    <p class="rarity-index">1 of {{ currentOpposingWizard.traits.affinityStats.totalWizardsHavingAffinity }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(currentOpposingWizard.traits.affinityStats.totalWizardsHavingAffinity) }}% have this trait</p>
                                </div>
                            </div>
                            
                            <div class="block-item block-item-outer" v-for="(trait, index) in currentOpposingWizard.traits.rarities">
                                <!-- Backneck Trait -->
                                <div class="block-item block-item-inner backneck" v-if="trait.backneck">
                                    <p class="backneck label">
                                        <strong>Backneck</strong>
                                    </p>
                                    <p class="backneck trait-name">{{ trait.backneck }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Boots Trait -->
                                <div class="block-item block-item-inner boots" v-if="trait.boots">
                                    <p class="backneck label">
                                        <strong>Boots</strong>
                                    </p>
                                    <p class="boots trait-name">{{ trait.boots }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Cape Trait -->
                                <div class="block-item block-item-inner cape" v-if="trait.cape">
                                    <p class="cape label">
                                        <strong>Cape</strong>
                                    </p>
                                    <p class="cape trait-name">{{ trait.cape }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Expression Trait -->
                                <div class="block-item block-item-inner expression" v-if="trait.expression">
                                    <p class="expression label">
                                        <strong>Expression</strong>
                                    </p>
                                    <p class="expression trait-name">{{ trait.expression }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Head Trait -->
                                <div class="block-item block-item-inner head" v-if="trait.head">
                                    <p class="head label">
                                        <strong>Head</strong>
                                    </p>
                                    <p class="head trait-name">{{ trait.head }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Hat Trait -->
                                <div class="block-item block-item-inner hat" v-if="trait.hat">
                                    <p class="hat label">
                                        <strong>Hat</strong>
                                    </p>
                                    <p class="hat trait-name">{{ trait.hat }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Left Hand Back Trait -->
                                <div class="block-item block-item-inner leftHandBack" v-if="trait.leftHandBack">
                                    <p class="leftHandBack label">
                                        <strong>Left Hand Back</strong>
                                    </p>
                                    <p class="leftHandBack trait-name">{{ trait.leftHandBack }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Left Hand Front Trait -->
                                <div class="block-item block-item-inner leftHhandFront" v-if="trait.leftHhandFront">
                                    <p class="leftHandBack label">
                                        <strong>Left Hand Front</strong>
                                    </p>
                                    <p class="leftHandFront trait-name">{{ trait.leftHhandFront }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Legs Trait -->
                                <div class="block-item block-item-inner legs" v-if="trait.legs">
                                    <p class="legs label">
                                        <strong>Legs</strong>
                                    </p>
                                    <p class="legs trait-name">{{ trait.legs }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Right Hand Front Trait -->
                                <div class="block-item block-item-inner rightHandFront" v-if="trait.rightHandFront">
                                    <p class="rightHandFront label">
                                        <strong>Right Hand Front</strong>
                                    </p>
                                    <p class="rightHandFront trait-name">{{ trait.rightHandFront }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>

                                <!-- Wand Trait -->
                                <div class="block-item block-item-inner wand" v-if="trait.wand">
                                    <p class="wand label">
                                        <strong>Wand</strong>
                                    </p>
                                    <p class="wand trait-name">{{ trait.wand }}</p>
                                    <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                    <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                    <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                    <p class="extra-rare" v-if="trait.extraRare">
                                        <span>Rare trait: {{ trait.extraRare }}</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Duels -->
            <div v-if="showDuels">
                <h4>Duels</h4>
                <div class="duels-table-container">
                    <table class="duels-table">
                        <thead>
                            <tr>
                                <th> id </th>
                                <th> wizard1Id </th>
                                <th> wizard2Id </th>
                                <th> affinity1 </th>
                                <th> affinity2 </th>
                                <th> startPower1 </th>
                                <th> startPower2 </th>
                                <th> endPower1 </th>
                                <th> endPower2 </th>
                                <th> moveSet1 </th>
                                <th> moveSet2 </th>
                                <th> startBlock </th>
                                <th> endBlock </th>
                                <th> timeoutBlockendBlock </th>
                                <th> timedOut </th>
                                <th> isAscensionBattle </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="duel in currentOpposingWizard.duels">
                                <td>{{ duel.id }}</td>
                                <td>{{ duel.wizard1Id }}</td>
                                <td>{{ duel.wizard2Id }}</td>
                                <td>{{ duel.affinity1 }}</td>
                                <td>{{ duel.affinity2 }}</td>
                                <td>{{ duel.startPower1 }}</td>
                                <td>{{ duel.startPower2 }}</td>
                                <td>{{ duel.endPower1 }}</td>
                                <td>{{ duel.endPower2 }}</td>
                                <td>{{ duel.moveSet1.substring(0,10) }}</td>
                                <td>{{ duel.moveSet2.substring(0,13) }}</td>
                                <td>{{ duel.startBlock }}</td>
                                <td>{{ duel.endBlock }}</td>
                                <td>{{ duel.timeoutBlockendBlock }}</td>
                                <td>{{ duel.timedOut }}</td>
                                <td>{{ duel.isAscensionBattle }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


        <!-- Match Predictor -->
        <div class="match-predictor" v-if="navigation.state == PREDICT_MATCHES">
            <h5>Match Predictor</h5>

            <!-- Enter Wizards to Compare -->
            <div class="choose-wizard" v-if="!userOwnsWizards || manualCurrentWizardSelection">
                <p class="current-wizard-label">
                    <label for="current_wizard">
                        <strong>My Wizard:</strong>
                    </label>
                </p>
                <input type="number" name="current_wizard" min="0" max="99999" v-model="currentWizard.selectedId" placeholder="Enter your Wizard ID">
                <p v-if="userOwnsWizards">
                    <a v-on:click="manualCurrentWizardSelection = false">Choose from owned Wizards</a>
                </p>
            </div>

            <!-- Auto-Select Owned Wizards From Dapper / Metamask Account -->
            <div class="choose-wizard" v-if="userOwnsWizards && !manualCurrentWizardSelection">
                <p class="current-wizard-label">
                    <label for="current_wizard" v-if="userOwnsWizards < 2">
                        <strong>My Wizard:</strong>
                    </label>
                    <label for="current_wizard" v-else>
                        <strong>My Wizards:</strong>
                    </label>
                </p>
                <select v-model="currentWizard.selectedId">
                    <option v-for="wizard in tokens.mainnet.wizards" v-bind:value="wizard.id">Cheeze Wizard #{{ wizard.id }}</option>
                </select>
                <p>
                    <a v-on:click="manualCurrentWizardSelection = true">Choose Wizard manually instead</a>
                </p>
            </div>

            <div class="choose-opponent">
                <p class="opponent-wizard-label">
                    <label for="current_wizard">
                        <strong>My Opponent's Wizard:</strong>
                    </label>
                </p>
                <input type="number" name="opposing_wizard" min="0" max="99999" v-model="currentOpposingWizard.selectedId" placeholder="Enter opponent's Wizard ID">
            </div>
            <div class="predict predict-btn">
                <button class="btn btn-primary" v-on:click="predictMatchOutcome(currentWizard.selectedId, currentOpposingWizard.selectedId);" :disabled="!currentWizard || !currentOpposingWizard">Compare Wizards</button>
            </div>

            <!-- Prediction Results -->
            <div class="match-prediction" v-if="matchPrediction !== 'undefined'">
                <!-- Nothing to predict -->
                <div class="invalid-prediction prediction-data" v-if="predictionType == PREDICTION_UNAVAILABLE || matchPrediction == false">
                    <p>
                        <strong>Wizard #{{currentWizard.id}} and Wizard #{{ currentOpposingWizard.id }} appear to be evenly matched!</strong>
                    </p>
                </div>

                <!-- Comparison Data -->
                <div class="prediction-data" v-else-if="matchPrediction">
                    <!-- OP Wizard -->
                    <p v-if="matchPrediction.higherPoweredWizard">
                        <strong>Wizard #{{ matchPrediction.higherPoweredWizard.id }} is more powerful!</strong>
                    </p>
                    <!-- OP Wizard -->
                    <div v-if="matchPrediction.id">
                        <h5>Careful now, you've encountered one seriously sassy sorceror!</h5>
                        <p>
                            <strong>Wizard #{{ matchPrediction.id }} is more powerful!</strong>
                        </p>
                        <p>
                            <strong>Wizard #{{ matchPrediction.id }} has an affinity advantage!</strong>
                        </p>
                    </div>
                    <!-- Well Suited Wizard-->
                    <p v-if="matchPrediction.betterSuitedWizard">
                        <strong>Wizard #{{ matchPrediction.betterSuitedWizard.id }} has an affinity advantage!</strong>
                    </p>
                    
                    <div v-if="matchPrediction[0]">
                        <p v-if="matchPrediction[0].higherPoweredWizard">
                            <strong>Wizard #{{ matchPrediction[0].higherPoweredWizard.id }} is more powerful!</strong>
                        </p>
                    </div>
                    <div v-if="matchPrediction[1]">
                        <p v-if="matchPrediction[1].betterSuitedWizard">
                            <strong>Wizard #{{ matchPrediction[1].betterSuitedWizard.id }} has an affinity advantage!</strong>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Your Wizard -->
            <div class="view-wizard-details" v-if="matchPrediction !==  'undefined'">
                <div class="single-wizard my-wizard jumbotron" v-if="currentWizard">
                    
                    <h1 class="display-4">Your Wizard:</h1>
                    <hr/>

                    <h5 class="title">Cheeze Wizard #{{ currentWizard.id }}</h5>
                    <!-- Affinity -->
                    <div class="affinity">
                        <p>
                            <strong>Affinity:</strong>
                            <img class="icon" :src="'img/icons/' + currentWizard.specialPower.toLowerCase() + '.svg'" v-if="currentWizard.specialPower && currentWizard.specialPower !== 'Unknown'"> {{ currentWizard.specialPower }}
                        </p>
                    </div>
                    <!-- Weak Against -->
                    <div class="vulnerability">
                        <p>
                            <strong>Weak Against:</strong>
                            <img class="icon" :src="'img/icons/' + currentWizard.vulnerability.toLowerCase() + '.svg'" v-if="currentWizard.vulnerability && currentWizard.vulnerability !== 'Unknown'"> {{ currentWizard.vulnerability }}
                        </p>
                    </div>
                    <!-- Strong Against -->
                    <div class="optimal-opponent">
                            <p>
                                <strong>Strong Against:</strong>
                                <img class="icon" :src="'img/icons/' + currentWizard.optimalOpponent.toLowerCase() + '.svg'" v-if="currentWizard.optimalOpponent && currentWizard.optimalOpponent !== 'Unknown'"> {{ currentWizard.optimalOpponent }}
                            </p>
                        </div>
                    <div class="power-level">
                        <p>
                            <strong>Power Level:</strong> {{ getPrettyPowerLevel(currentWizard.power) }}
                        </p>
                    </div>
                    <div class="growth">
                        <p>
                            <strong>Lifetime Power Growth:</strong> {{ getPrettyPowerLevel(currentWizard.power - currentWizard.initialPower) }}
                        </p>
                    </div>
                    <div>
                    </div>
                    <div class="cheese-wizard-image my-wizard-img" :style="'background-image: url(' + currentWizard.image + ')'" v-if="currentWizard.image">
                        <!--
                        <div class="cheese-wizard-image cheese-wizard-image-small">
                            <img class="img-fluid" :src="currentWizard.image">
                        </div>
                        -->
                    </div>

                    <!-- Show Other Wizards You Own -->
                    <div class="show-my-wizards">
                        <!-- View Your Other Wizards -->
                        <a v-on:click="showAllWizardsOfOwner(currentWizard.owner, true, true)">View all owned Wizards</a>
                    </div>
                    <modal v-if="comparisonMyWizardsModalShown" @close="comparisonMyWizardsModalShown = false">
                        <!-- Custom Modal Overrides -->
                        <h3 slot="header">{{ currentWizard.owner }}'s Wizards</h3>
                        <div slot="body">
                            <div class="wizard-card-block-item wizard-card-block-item-outer" v-for="wizard in selectedWizardsByAddress">
                                <div class="wizard-card-block-item">
                                    <!-- Wizard Image -->
                                    <a v-on:click="showMyComparisonWizard(wizard.id); comparisonMyWizardsModalShown = false;">
                                        <div class="wizard-card wizard-card-img">
                                            <div class="cheese-wizard-image selected-by-address-opponent-img" :style="'background-image: url(' + wizard.image + ')'" v-if="wizard.image"></div>
                                            <!-- Card Label (Link Text) -->
                                            <div class="wizard-card wizard-card-label">
                                                <p>Cheeze Wizard #{{ wizard.id }} - <img class="icon" :src="'img/icons/' + affinities[wizard.affinity].toLowerCase() + '.svg'" v-if="wizard.affinity !== 0"> - {{ getPrettyPowerLevel(wizard.power) }}</p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </modal>

                    <!-- Traits -->
                    <div class="show-my-traits">
                        <a v-on:click="showMyWizardTraits = true" v-if="!showMyWizardTraits">Show unique traits</a>
                        <a v-on:click="showMyWizardTraits = false" v-if="showMyWizardTraits">Hide traits</a>
                    </div>

                    <div class="traits traits-container wizards-compare" v-if="currentWizard.traits && showMyWizardTraits">
                        <div class="traits traits-container-inner" v-if="currentWizard.traits.rarities">
                            <div class="block-grid-xs-2 block-grid-sm-3 block-grid-md-4" v-if="currentWizard.traits.rarities.length">
                                <div class="block-item block-item-outer" v-if="currentWizard.traits.affinityStats && currentWizard.specialPower && currentWizard.specialPower !== 'Unknown'">
                                    
                                    <!-- Affinity Trait -->
                                    <div class="block-item block-item-inner affinity">
                                        <p class="affinity label">
                                            <strong>Affinity Type</strong>
                                        </p>
                                        <p class="affinity trait-name">{{ currentWizard.specialPower }}</p>
                                        <p class="rarity-index">1 of {{ currentWizard.traits.affinityStats[currentWizard.specialPower] }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(currentWizard.traits.affinityStats[currentWizard.specialPower]) }}% have this trait</p>
                                    </div>
                                </div>
        
                                <!-- Elemental Trait -->
                                <div class="block-item block-item-outer" v-if="currentWizard.traits.affinityStats && currentWizard.specialPower !== 'Neutral' && currentWizard.specialPower !== 'Unknown'">
                                    <div class="block-item block-item-inner elemental">
                                        <p class="elemental label">
                                            <strong>Elemental</strong>
                                        </p>
                                        <p class="rarity-index">1 of {{ currentWizard.traits.affinityStats.totalWizardsHavingAffinity }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(currentWizard.traits.affinityStats.totalWizardsHavingAffinity) }}% have this trait</p>
                                    </div>
                                </div>
                                
                                <div class="block-item block-item-outer" v-for="(trait, index) in currentWizard.traits.rarities">
                                    <!-- Backneck Trait -->
                                    <div class="block-item block-item-inner backneck" v-if="trait.backneck">
                                        <p class="backneck label">
                                            <strong>Backneck</strong>
                                        </p>
                                        <p class="backneck trait-name">{{ trait.backneck }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Boots Trait -->
                                    <div class="block-item block-item-inner boots" v-if="trait.boots">
                                        <p class="backneck label">
                                            <strong>Boots</strong>
                                        </p>
                                        <p class="boots trait-name">{{ trait.boots }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Cape Trait -->
                                    <div class="block-item block-item-inner cape" v-if="trait.cape">
                                        <p class="cape label">
                                            <strong>Cape</strong>
                                        </p>
                                        <p class="cape trait-name">{{ trait.cape }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Expression Trait -->
                                    <div class="block-item block-item-inner expression" v-if="trait.expression">
                                        <p class="expression label">
                                            <strong>Expression</strong>
                                        </p>
                                        <p class="expression trait-name">{{ trait.expression }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Head Trait -->
                                    <div class="block-item block-item-inner head" v-if="trait.head">
                                        <p class="head label">
                                            <strong>Head</strong>
                                        </p>
                                        <p class="head trait-name">{{ trait.head }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Hat Trait -->
                                    <div class="block-item block-item-inner hat" v-if="trait.hat">
                                        <p class="hat label">
                                            <strong>Hat</strong>
                                        </p>
                                        <p class="hat trait-name">{{ trait.hat }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Left Hand Back Trait -->
                                    <div class="block-item block-item-inner leftHandBack" v-if="trait.leftHandBack">
                                        <p class="leftHandBack label">
                                            <strong>Left Hand Back</strong>
                                        </p>
                                        <p class="leftHandBack trait-name">{{ trait.leftHandBack }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Left Hand Front Trait -->
                                    <div class="block-item block-item-inner leftHhandFront" v-if="trait.leftHhandFront">
                                        <p class="leftHandBack label">
                                            <strong>Left Hand Front</strong>
                                        </p>
                                        <p class="leftHandFront trait-name">{{ trait.leftHhandFront }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Legs Trait -->
                                    <div class="block-item block-item-inner legs" v-if="trait.legs">
                                        <p class="legs label">
                                            <strong>Legs</strong>
                                        </p>
                                        <p class="legs trait-name">{{ trait.legs }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Right Hand Front Trait -->
                                    <div class="block-item block-item-inner rightHandFront" v-if="trait.rightHandFront">
                                        <p class="rightHandFront label">
                                            <strong>Right Hand Front</strong>
                                        </p>
                                        <p class="rightHandFront trait-name">{{ trait.rightHandFront }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
        
                                    <!-- Wand Trait -->
                                    <div class="block-item block-item-inner wand" v-if="trait.wand">
                                        <p class="wand label">
                                            <strong>Wand</strong>
                                        </p>
                                        <p class="wand trait-name">{{ trait.wand }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Opponent's Wizard -->
            <div class="view-wizard-details" v-if="matchPrediction !== 'undefined'">
                <div class="single-wizard opponent-wizard jumbotron" v-if="currentOpposingWizard">

                    <h1 class="display-4">Opponent's Wizard:</h1>
                    <hr/>

                    <h5 class="title">Cheeze Wizard #{{ currentOpposingWizard.id }}</h5>
                    <!-- Affinity -->
                    <div class="affinity">
                        <p>
                            <strong>Affinity:</strong>
                            <img class="icon" :src="'img/icons/' + currentOpposingWizard.specialPower.toLowerCase() + '.svg'" v-if="currentOpposingWizard.specialPower && currentOpposingWizard.specialPower !== 'Unknown'"> {{ currentOpposingWizard.specialPower }}
                        </p>
                    </div>
                    <!-- Weak Against -->
                    <div class="vulnerability">
                        <p>
                            <strong>Weak Against:</strong>
                            <img class="icon" :src="'img/icons/' + currentOpposingWizard.vulnerability.toLowerCase() + '.svg'" v-if="currentOpposingWizard.vulnerability && currentOpposingWizard.vulnerability !== 'Unknown'"> {{ currentOpposingWizard.vulnerability }}
                        </p>
                    </div>
                    <!-- Strong Against -->
                    <div class="optimal-opponent">
                        <p>
                            <strong>Strong Against:</strong>
                            <img class="icon" :src="'img/icons/' + currentOpposingWizard.optimalOpponent.toLowerCase() + '.svg'" v-if="currentOpposingWizard.optimalOpponent && currentOpposingWizard.optimalOpponent !== 'Unknown'"> {{ currentOpposingWizard.optimalOpponent }}
                        </p>
                    </div>
                    <div class="power-level">
                        <p>
                            <strong>Power Level:</strong> {{ getPrettyPowerLevel(currentOpposingWizard.power) }}
                        </p>
                    </div>
                    <div class="growth">
                        <p>
                            <strong>Lifetime Power Growth:</strong> {{ getPrettyPowerLevel(currentOpposingWizard.power - currentOpposingWizard.initialPower) }}
                        </p>
                    </div>
                    <div class="cheese-wizard-image selected-opponent-img" :style="'background-image: url(' + currentOpposingWizard.image + ')'" v-if="currentOpposingWizard.image">
                        <!--
                        <div class="cheese-wizard-image cheese-wizard-image-small">
                            <img class="img-fluid" :src="currentOpposingWizard.image">
                        </div>
                        -->
                    </div>

                    <!-- Show Other Wizards of Owner -->
                    <div class="show-opponent-wizards">
                        <!-- View Other Wizards By This Owner -->
                        <a v-on:click="showAllWizardsOfOwner(currentOpposingWizard.owner, true)">View all Wizards from this owner</a>
                    </div>
                    <modal v-if="comparisonWizardsByAddressModalShown" @close="comparisonWizardsByAddressModalShown = false">
                        <!-- Custom Modal Overrides -->
                        <h3 slot="header">{{ currentOpposingWizard.owner }}'s Wizards</h3>
                        <div slot="body">
                            <div class="wizard-card-block-item wizard-card-block-item-outer" v-for="wizard in selectedWizardsByAddress">
                                <div class="wizard-card-block-item">
                                    <!-- Wizard Image -->
                                    <a v-on:click="showComparisonWizard(wizard.id); comparisonWizardsByAddressModalShown = false;">
                                        <div class="wizard-card wizard-card-img">
                                            <div class="cheese-wizard-image selected-by-address-opponent-img" :style="'background-image: url(' + wizard.image + ')'" v-if="wizard.image"></div>
                                            <!-- Card Label (Link Text) -->
                                            <div class="wizard-card wizard-card-label">
                                                <p>Cheeze Wizard #{{ wizard.id }} - <img class="icon" :src="'img/icons/' + affinities[wizard.affinity].toLowerCase() + '.svg'" v-if="wizard.affinity !== 0"> - {{ getPrettyPowerLevel(wizard.power) }}</p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </modal>

                    <!-- Traits -->
                    <div class="show-opponent-traits">
                        <a v-on:click="showOpponentTraits = true" v-if="!showOpponentTraits">Show unique traits</a>
                        <a v-on:click="showOpponentTraits = false" v-if="showOpponentTraits">Hide traits</a>
                    </div>

                    <div class="traits traits-container wizards-compare" v-if="currentOpposingWizard.traits && showOpponentTraits">
                        <div class="traits traits-container-inner" v-if="currentOpposingWizard.traits.rarities">
                            <div class="block-grid-xs-2 block-grid-sm-3 block-grid-md-4" v-if="currentOpposingWizard.traits.rarities.length">
                                <div class="block-item block-item-outer" v-if="currentOpposingWizard.traits.affinityStats && currentOpposingWizard.specialPower && currentOpposingWizard.specialPower !== 'Unknown'">
                                        
                                    <!-- Affinity Trait -->
                                    <div class="block-item block-item-inner affinity">
                                        <p class="affinity label">
                                            <strong>Affinity Type</strong>
                                        </p>
                                        <p class="affinity trait-name">{{ currentOpposingWizard.specialPower }}</p>
                                        <p class="rarity-index">1 of {{ currentOpposingWizard.traits.affinityStats[currentOpposingWizard.specialPower] }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(currentOpposingWizard.traits.affinityStats[currentOpposingWizard.specialPower]) }}% have this trait</p>
                                    </div>
                                </div>
            
                                <!-- Elemental Trait -->
                                <div class="block-item block-item-outer" v-if="currentOpposingWizard.traits.affinityStats && currentOpposingWizard.specialPower !== 'Neutral' && currentOpposingWizard.specialPower !== 'Unknown'">
                                    <div class="block-item block-item-inner elemental">
                                        <p class="elemental label">
                                            <strong>Elemental</strong>
                                        </p>
                                        <p class="rarity-index">1 of {{ currentOpposingWizard.traits.affinityStats.totalWizardsHavingAffinity }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(currentOpposingWizard.traits.affinityStats.totalWizardsHavingAffinity) }}% have this trait</p>
                                    </div>
                                </div>
                                    
                                <div class="block-item block-item-outer" v-for="(trait, index) in currentOpposingWizard.traits.rarities">
                                    <!-- Backneck Trait -->
                                    <div class="block-item block-item-inner backneck" v-if="trait.backneck">
                                        <p class="backneck label">
                                            <strong>Backneck</strong>
                                        </p>
                                        <p class="backneck trait-name">{{ trait.backneck }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Boots Trait -->
                                    <div class="block-item block-item-inner boots" v-if="trait.boots">
                                        <p class="backneck label">
                                            <strong>Boots</strong>
                                        </p>
                                        <p class="boots trait-name">{{ trait.boots }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Cape Trait -->
                                    <div class="block-item block-item-inner cape" v-if="trait.cape">
                                        <p class="cape label">
                                            <strong>Cape</strong>
                                        </p>
                                        <p class="cape trait-name">{{ trait.cape }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Expression Trait -->
                                    <div class="block-item block-item-inner expression" v-if="trait.expression">
                                        <p class="expression label">
                                            <strong>Expression</strong>
                                        </p>
                                        <p class="expression trait-name">{{ trait.expression }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Head Trait -->
                                    <div class="block-item block-item-inner head" v-if="trait.head">
                                        <p class="head label">
                                            <strong>Head</strong>
                                        </p>
                                        <p class="head trait-name">{{ trait.head }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Hat Trait -->
                                    <div class="block-item block-item-inner hat" v-if="trait.hat">
                                        <p class="hat label">
                                            <strong>Hat</strong>
                                        </p>
                                        <p class="hat trait-name">{{ trait.hat }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Left Hand Back Trait -->
                                    <div class="block-item block-item-inner leftHandBack" v-if="trait.leftHandBack">
                                        <p class="leftHandBack label">
                                            <strong>Left Hand Back</strong>
                                        </p>
                                        <p class="leftHandBack trait-name">{{ trait.leftHandBack }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Left Hand Front Trait -->
                                    <div class="block-item block-item-inner leftHhandFront" v-if="trait.leftHhandFront">
                                        <p class="leftHandBack label">
                                            <strong>Left Hand Front</strong>
                                        </p>
                                        <p class="leftHandFront trait-name">{{ trait.leftHhandFront }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Legs Trait -->
                                    <div class="block-item block-item-inner legs" v-if="trait.legs">
                                        <p class="legs label">
                                            <strong>Legs</strong>
                                        </p>
                                        <p class="legs trait-name">{{ trait.legs }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Right Hand Front Trait -->
                                    <div class="block-item block-item-inner rightHandFront" v-if="trait.rightHandFront">
                                        <p class="rightHandFront label">
                                            <strong>Right Hand Front</strong>
                                        </p>
                                        <p class="rightHandFront trait-name">{{ trait.rightHandFront }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
            
                                    <!-- Wand Trait -->
                                    <div class="block-item block-item-inner wand" v-if="trait.wand">
                                        <p class="wand label">
                                            <strong>Wand</strong>
                                        </p>
                                        <p class="wand trait-name">{{ trait.wand }}</p>
                                        <p class="rarity-index" v-if="trait.rarity">1 of {{ trait.rarity }}</p>
                                        <p class="rarity-index" v-else>1 of {{ TOTAL_WIZARDS }}</p>
                                        <p class="rarity-percentage">{{ getPrettyRarity(trait.rarity) }}% have this trait</p>
                                        <p class="extra-rare" v-if="trait.extraRare">
                                            <span>Rare trait: {{ trait.extraRare }}</span>
                                        </p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
            </div>

        </div>
    </div>

    <!-- Template For Sidebar Component -->
    <script type="text/x-template" id="sidebar-template">
        <div id="parentx">
            <slot name="menu-items"></slot>
            <img src="img/icons/chat.svg" class="icon chat-icon sidebar-ctrlr" @click="showSidebar = !showSidebar">
            <vs-sidebar position-right  parent="body" default-index="1"  color="primary" class="sidebarx" spacer v-model="showSidebar">
            
                <!-- Close Sidebar -->
                <div class="close-sidebar">
                    <a class="link" src="img/icons/chat.svg" @click="showSidebar = false">Close Chat</a>
                </div>

                <!-- Sidebar Header -->
                <slot class="header-sidebar" name="header">
                    <vs-avatar  size="70px" src="https://randomuser.me/api/portraits/men/85.jpg"/>
                    <h4>Title</h4>
                </slot>

                <!-- Main Content -->
                <slot name="body">Body</slot>

                <!-- Footer -->
                <div class="footer-sidebar" slot="footer">
                    <p>Footer</p>
                </div>
            
            </vs-sidebar>
        </div>
    </script>
    <!-- End Sidebar Template -->
    
    <!-- Template For Modal Component -->
    <script type="text/x-template" id="modal-template">
        <transition name="modal">
            <div class="modal-mask">
                <div class="modal-wrapper">
                    <div class="modal-container">
                        <!-- Header Slot -->
                        <div class="modal-header">
                            <slot name="header"></slot>
                        </div>
                        <!-- Body Slot -->
                        <div class="modal-body">
                            <slot name="body"></slot>
                        </div>
                        <!-- Footer Slot -->
                        <div class="modal-footer">
                            <slot name="footer">
                                <button class="modal-default-button btn btn-primary" @click="$emit('close')">
                                    <slot name="footer">Close</slot>
                                </button>
                            </slot>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
    </script>
    <!-- End Modal Template -->

    <script type="text/javascript" src="build/app.js"></script>
</body>
</html>
