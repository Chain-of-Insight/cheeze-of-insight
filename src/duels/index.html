<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <title>The Cheeze of Insight</title>

    <!-- CSS Imports -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/bootstrap.block-grid/latest/bootstrap4-block-grid.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuesax/dist/vuesax.css" rel="stylesheet">
    <link href="https://unpkg.com/vue-simple-context-menu/dist/vue-simple-context-menu.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/duels.css" rel="stylesheet">
    <!-- JS Imports -->
    <!-- jQuery is only for Firechat, sigh -->
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <!-- Firebase -->
    <script type="text/javascript" src="../js/firebase.js"></script>
    <!-- Fire Chat -->
    <script type="text/javascript" src="../node_modules/firechat/dist/firechat.js"></script>
    <!-- Vue.js -->
    <script type="text/javascript" src="../js/vue.js"></script>
    <script type="text/javascript" src="../js/vuefire.js"></script>
    <script type="text/javascript" src="../js/vuesax.js"></script>
    <script type="text/javascript" src="../js/vue-simple-context-menu.js"></script>
</head>
<body>
    <div id="duels" class="container container-fluid main-content">
        <a href="/">Back</a>

        <div class="main-match-container">
            <div class="forecast-panel">
                <h3>Forecast your Spells!</h3>

                <round-picker label="Turn 1" v-bind:value.sync="ourMoves[0]"></round-picker>
                <round-picker label="Turn 2" v-bind:value.sync="ourMoves[1]"></round-picker>
                <round-picker label="Turn 3" v-bind:value.sync="ourMoves[2]"></round-picker>
                <round-picker label="Turn 4" v-bind:value.sync="ourMoves[3]"></round-picker>
                <round-picker label="Turn 5" v-bind:value.sync="ourMoves[4]"></round-picker>

                <div v-if="mode != 'offline'" class="forecast-submit-button">
                    <button
                        @click="submitTurn();"
                        :disabled="!(ourMoves[0] && ourMoves[1] && ourMoves[2] && ourMoves[3] && ourMoves[4])">

                        Submit
                    </button>
                </div>
            </div>

            <div v-if="mode == 'offline'" class="forecast-panel">
                <h3>Simulate Opponent's Forecast!</h3>

                <round-picker label="Turn 1" v-bind:value.sync="opponentMoves[0]"></round-picker>
                <round-picker label="Turn 2" v-bind:value.sync="opponentMoves[1]"></round-picker>
                <round-picker label="Turn 3" v-bind:value.sync="opponentMoves[2]"></round-picker>
                <round-picker label="Turn 4" v-bind:value.sync="opponentMoves[3]"></round-picker>
                <round-picker label="Turn 5" v-bind:value.sync="opponentMoves[4]"></round-picker>

            </div>
        </div>


        <div v-if="mode != 'offline'" class="forecast-panel">
            <div v-if="opponentMoves">
                <span>Opponent's moves have been cast.</span>
                <button @click="clearOpponentMoves();">Clear opponent's forecast</button>
            </div>
            <div v-else class="forecast-submit-button">
                <span>Waiting for opponent to submit forecast...</span>
                <button @click="submitRandomOpponentForecast();">Submit Opponent's Forecast</button>
            </div>
        </div>

        <duel-status
                v-if="duelResults"
                v-bind:outcome="duelResults.outcome"
                v-bind:power="duelResults.power"
                v-bind:score="duelResults.score">
        </duel-status>

    </div>

    <!-- Template for round picking -->
    <script type="text/x-template" id="round-picker-template">
        <div>
            <span>{{ label }}</span>
            <select v-model="value" v-on:change="$emit('update:value', value);">
                <option v-bind:value="2">Fire</option>
                <option v-bind:value="3">Water</option>
                <option v-bind:value="4">Wind</option>
            </select>
        </div>
    </script>

    <!-- Template for duel status -->
    <script type="text/x-template" id="duel-status-template">
        <div class="duel-status-container">
            <h3>Duel Results: {{ outcome }} !!</h3>
            <div><span>Power: {{ power }}</span></div>
            <div><span>Score: {{ score }}</span></div>
        </div>
    </script>

    <!-- Template For Sidebar Component -->
    <script type="text/x-template" id="sidebar-template">
        <div id="parentx">
            <slot name="menu-items"></slot>
            <img id="close_sidebar" src="img/icons/chat.svg" class="icon chat-icon sidebar-ctrlr" @click="showSidebar = !showSidebar;">
            <vs-sidebar position-right  parent="body" default-index="1"  color="primary" class="sidebarx" spacer v-model="showSidebar">

                <!-- Sidebar Header -->
                <slot class="header-sidebar" name="header">
                    <vs-avatar  size="70px" src="https://randomuser.me/api/portraits/men/85.jpg"/>
                    <h4>Title</h4>
                </slot>

                <!-- Main Content -->
                <slot name="body">Body</slot>

                <!-- Footer -->
                <div class="footer-sidebar" slot="footer">
                    <p></p>
                </div>
            
            </vs-sidebar>
        </div>
    </script>
    <!-- End Sidebar Template -->
    
    <!-- Template For Modal Component -->
    <script type="text/x-template" id="modal-template">
        <transition name="modal">
            <div class="modal-mask">
                <div class="modal-wrapper">
                    <div class="modal-container">
                        <!-- Header Slot -->
                        <div class="modal-header">
                            <slot name="header"></slot>
                        </div>
                        <!-- Body Slot -->
                        <div class="modal-body">
                            <slot name="body"></slot>
                        </div>
                        <!-- Footer Slot -->
                        <div class="modal-footer">
                            <slot name="footer">
                                <button id="modal_close" class="modal-default-button btn btn-primary" @click="$emit('close')">
                                    <slot name="footer">Close</slot>
                                </button>
                            </slot>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
    </script>
    <!-- End Modal Template -->

    <!-- Begin Notifications Template -->
    <script type="text/x-template" id="notification-template">
        <div class="con-notifications-position">
            <slot name="notification" @click="$vs.notify({title:'Position top-right',text:'Lorem ipsum dolor sit amet, consectetur',color:'success',position:'top-right'})" color="success" type="flat">Notification</slot>
        </div>
    </script>
    <!-- End Notifications Template -->

    <!-- Begin Duel Request Template -->
    <script type="text/x-template" id="duel-request-template">
        <vs-row vs-justify="center">
            <vs-col type="flex" vs-justify="center" vs-align="center" vs-w="12">
                <vs-card>
                    <slot name="header">
                        <h3>Title</h3>
                    </slot>
                    <slot name="body">
                        <span>Body</span>
                    </slot>
                    <slot name="footer">
                        <vs-row vs-justify="flex-end">Footer</vs-row>
                    </slot>
                </vs-card>
            </vs-col>
        </vs-row>
    </script>
    <!-- End Duel Request Template -->

    <script type="text/javascript" src="../build/app.js"></script>
</body>
</html>
